
{{/*
  GetCalendarEntries
  Retrieves the calendar entries form the OTIS API and transform them for the site's own consumption

  @author @regisphilibert

  @context Any ()

  @access private

  @returns Slice of Maps
    - See transformers/calendar@returns

  @uses
     - func/GetOTIS
*/}}
{{ $entries := slice -}}
{{ if ne hugo.Environment "skip-json" -}}
  {{ range partialCached "func/GetOTIS" "calendar" "calendar" }}
    {{ $entries = $entries | append (partial "transformers/calendar" .) }}
  {{ end }}
{{ end }}
{{ $entries := where $entries "start_date" "!=" nil }}
{{ return sort $entries "start_date" "asc" }}