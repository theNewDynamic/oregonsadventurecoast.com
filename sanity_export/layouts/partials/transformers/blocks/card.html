{{ $s := newScratch }}
{{ $s.Set "data" (dict "_type" "genericItem") }}
{{ $s.Set "secondary" dict }}
{{ with .desktoptitle }}
  {{ $s.SetInMap "data" "title" . }}
{{ end }}

{{ with .desktopphoto }}
  {{ $s.SetInMap "data" "image" (partial "transformers/image" .) }}
{{ end }}

{{ with .url }}
  {{ $link := (dict
    "linkType" "url"
    "url" .
  ) }}
  {{ with where site.RegularPages ".RelPermalink" (print . "/") }}
    {{ with index . 0 }}
      {{ $link = (dict
        "linkType" "entry"
        "entry" (dict
          "_type" "reference"
          "_ref" (partial "func/GetID" .)
        )
      ) }}
    {{ end }}
  {{ end }}
  {{ $s.SetInMap "data" "link" $link }}
{{ end }}

{{ with .hoverdescription }}
  {{ $s.SetInMap "data" "copyHTML" . }}
{{ end }}

{{ with .hovertitle }}
  {{ $s.SetInMap "secondary" "title" . }}
{{ end }}

{{ with $s.Get "secondary" }}
  {{ $s.SetInMap "data" "secondary" . }}
{{ end }}

{{ return $s.Get "data" }}